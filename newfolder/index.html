<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">
        
        <script src="https://maps.api.2gis.ru/2.0/loader.js"></script>
    </head>
    <body>
	
	<input id="showPopup" type="button" value="с кнопкой вызова" />
	<input id="showPopup2" type="button" value="С пандусом" />
	<input id="showPopup3" type="button" value="все" />
       
        <div id="map" style="width: 100%; height: 1000PX;"></div>
		
        <script type="text/javascript">
		 
            //var locationInfo = document.getElementById('location');
//DG.control.zoom( <DG.Control.Zoom options> options )
            DG.then(function () {
			var mkvsp = DG.featureGroup(),mksp = DG.featureGroup(); //без пандуса
			
			var showButton = document.getElementById('showPopup'),showButton2 = document.getElementById('showPopup2');
                var map, X, Y,
                    marker;
					
					//ПРОРИСОВКА КАРТЫ
					map = DG.map('map', {
                    center: [50.27, 127.54],
                    zoom: 15
					//closePopupOnClick: false;
                });
		                DG.control.location({position: 'bottomright'}).addTo(map);
                DG.control.scale().addTo(map);
                DG.control.ruler({position: 'bottomleft'}).addTo(map);
                DG.control.traffic().addTo(map);

					 //без пандуса
					var balloonHTML = '<a href="base/1.png" target="_blank">\n\
        <img src="base/1.png" alt="2GIS" title="2GIS" width="154" height="66" style="border: none"></a>\n\
        <p>Компания "LegeArtis"</p>Тел.: (4162) 54-90-19<br />Адрес: г. Благовещенск<br />\n\ ';
					 
				/*var popup = DG.popup()
							.setLatLng(latlng)
							.setContent('<p>Привет мир!<br />Это попап.</p>');*/
							
				///создание маркеров;
				coordinates = new Array(5);
					for (var i = 0; i < coordinates.length; i++) {
						coordinates[i] = new Array(2);
						coordinates[i][0]= 50.27 - (Math.random()*(0.015+0.015)-0.015);
						coordinates[i][1]= 127.54 + (Math.random()*(0.015+0.015)-0.015);
						
						
						marker = DG.marker([coordinates[i][0],coordinates[i][1]], {
                    draggable: false
                }).addTo(mkvsp).bindPopup(balloonHTML);
				}
				var balloonHTML3 = '<a href="base/IMG-20181013-WA0005.jpg" target="_blank">\n\
        <img src="base/IMG-20181013-WA0005.jpg"  width="154" height="66" style="border: none"></a>\n\
        <p>Компания "Мастерок"</p>Тел.: (4162) 54-90-19<br />Адрес: г. Благовещенск<br />\n\ ';
				var coordinates3 = new Array(5);
					for (var i = 0; i < coordinates3.length; i++) {
						coordinates3[i] = new Array(2);
						coordinates3[i][0]= 50.27 - (Math.random()*(0.015+0.015)-0.015);
						coordinates3[i][1]= 127.54 + (Math.random()*(0.015+0.015)-0.015);
						
						
						marker = DG.marker([coordinates3[i][0],coordinates3[i][1]], {
                    draggable: false
                }).addTo(mkvsp).bindPopup(balloonHTML3);
										//marker.bindPopup(popupContent).openPopup();

					}
            //////////////////////////////////////////////////////////////////////////////////////
			         showButton.onclick = function() {mksp.removeFrom(map);mkvsp.addTo(map)};

					 var balloonHTML2 = '<a href="base/IMG-20181013-WA0004.jpg" target="_blank">\n\
        <img src="base/IMG-20181013-WA0004.jpg"  width="154" height="66" style="border: none"></a>\n\
        <p>Компания "Семейная аптека"</p>Тел.: (4162) 47-51-84<br />Адрес: г. Благовещенск<br />\n\ ';
					 
				/*var popup = DG.popup()
							.setLatLng(latlng)
							.setContent('<p>Привет мир!<br />Это попап.</p>');*/
							
				///создание маркеров;
				coordinates2 = new Array(5);
					for (var i = 0; i < coordinates2.length; i++) {
						coordinates2[i] = new Array(2);
						coordinates2[i][0]= 50.265 - (Math.random()*(0.015+0.015)-0.015);
						coordinates2[i][1]= 127.55 + (Math.random()*(0.015+0.015)-0.015);
						
						
						marker = DG.marker([coordinates2[i][0],coordinates2[i][1]], {
                    draggable: false
                }).addTo(mksp).bindPopup(balloonHTML2);
										//marker.bindPopup(popupContent).openPopup();

					}
            var balloonHTML4 = '<a href="base/IMG-20181013-WA0001.jpg" target="_blank">\n\
        <img src="base/IMG-20181013-WA0001.jpg"  width="154" height="66" style="border: none"></a>\n\
        <p>Компания "Компромис"</p>Тел.: (4162) 47-90-55<br />Адрес: г. Благовещенск<br />\n\ ';
				var coordinates4 = new Array(5);
					for (var i = 0; i < coordinates4.length; i++) {
						coordinates4[i] = new Array(2);
						coordinates4[i][0]= 50.27 - (Math.random()*(0.015+0.015)-0.015);
						coordinates4[i][1]= 127.54 + (Math.random()*(0.015+0.015)-0.015);
						
						
						marker = DG.marker([coordinates4[i][0],coordinates4[i][1]], {
                    draggable: false
                }).addTo(mksp).bindPopup(balloonHTML4);
										//marker.bindPopup(popupContent).openPopup();

					}
			         showButton2.onclick = function() { mkvsp.removeFrom(map); mksp.addTo(map);};
					 
					 
					 var showButton3 = document.getElementById('showPopup3');
					 showButton3.onclick = function() { mkvsp.removeFrom(map);mksp.removeFrom(map); mksp.addTo(map);mkvsp.addTo(map);};
					 
 /*                   popups = DG.featureGroup(),
                    coordinates = new Array(10);
					for (var i = 0; i < coordinates.length; i++) {
						coordinates[i] = new Array(3);
					}
               
//for (var i = 0; i < 10; i++) {}
                    coordinates[0][0] = 50.27; //- Math.random();
                    coordinates[0][1] = 127.54; //+ Math.random();
                    DG.popup()
                        .setLatLng(coordinates[0])
                        .setContent('Я попап №' + i)
                        .addTo(popups);
                

                popups.addTo(map);

                // фокусируем область видимости на попапах
                map.fitBounds(popups.getBounds());*/
            /*    marker = DG.marker([50.27, 127.54], {
                    draggable: true
                }).addTo(map).bindPopup('lat');

                marker.on('drag', function(e) {
                    var lat = e.target._latlng.lat.toFixed(3),
                        lng = e.target._latlng.lng.toFixed(3);

                    locationInfo.innerHTML = lat + ', ' + lng;
                });*/
				// создаем 10 попапов в случайных местах и добавляем их в группу
                
            });
        </script>
    </body>
</html>